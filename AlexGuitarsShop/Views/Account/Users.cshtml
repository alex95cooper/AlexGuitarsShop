@model AlexGuitarsShop.Domain.ViewModels.UserListViewModel

@{
    string textTitle = Model.Role;
}

@{
    ViewData["Title"] = textTitle;
}

<div class="users-page-container">
    <div class="users-page-background-container">
        <div class="users-content">
            @foreach (var user in Model.Users)
            {
                <div class="user-container">
                    <div class="user-info">
                        <p>Name : @user.Name</p>
                        <p>Email : @user.Email</p>
                    </div>

                    @if (User.IsInRole("SuperAdmin"))
                    {
                        @if (Model.Role == "Users")
                        {
                            <div class="make-button-container">
                                <a class="make-button" asp-controller="Account" asp-route-email="@user.Email"
                                   asp-action="MakeAdmin">
                                    <strong>Make admin</strong>
                                </a>
                            </div>
                        }
                        else
                        {
                            <div class="make-button-container">
                                <a class="make-button" asp-controller="Account" asp-route-email="@user.Email" asp-action="MakeUser">
                                    <strong>Make user</strong>
                                </a>
                            </div>
                        }
                    }
                </div>
            }
            <div class="paginator-container">
                <div class="paginator">
                    <a class="border-page-number" href="#">[ </a>
                    @for (int i = 1; i < Model.PageCount + 1; i++)
                    {
                        if (i == Model.CurrentPage)
                        {
                            <a class="current-page-number" href="#"> @i</a>
                        }
                        else
                        {
                            <a class="page-number" asp-controller="Account" asp-route-role="@Model.Role" 
                            asp-route-pageNumber="@i" asp-action="Users">@i</a>
                        }
                    }
                    <a class="border-page-number" href="#"> ]</a>
                </div>
            </div>
        </div>
    </div>
</div>